<!--
SYNC IMPACT REPORT
==================
Version Change: Initial → 1.0.0
Modified Principles: N/A (Initial constitution)
Added Sections:
  - Core Principles (3 principles)
  - Integration Requirements
  - Quality Standards
  - Governance

Templates Requiring Updates:
  ✅ plan-template.md - Constitution Check section aligns with automation principles
  ✅ spec-template.md - Requirements align with automation scope
  ✅ tasks-template.md - Task categorization reflects automation workflows
  ✅ All command files - Generic guidance confirmed, no agent-specific references

Follow-up TODOs: None
-->

# Linear-GitHub Automation Constitution

## Core Principles

### I. Automatic Task Mapping

Every task created in Speckit's tasks.md MUST be automatically registered as a Linear issue
without manual intervention. The automation MUST preserve task metadata including priority,
dependencies, user story association, and implementation status. Task IDs from tasks.md MUST
map bidirectionally to Linear issue identifiers.

**Rationale**: Manual task entry is error-prone and creates synchronization drift between
planning artifacts and Linear workspace. Automatic mapping ensures single source of truth
and reduces cognitive overhead for development teams.

### II. Zero Manual Input for PR Integration

When developers create GitHub Pull Requests, the system MUST automatically populate PR
descriptions with the corresponding Linear task name and reference without requiring manual
input. The automation MUST detect task context from branch name, commit messages, or working
directory state. PR-to-Linear linking MUST complete before the PR is submitted for review.

**Rationale**: Manual PR annotation is frequently forgotten or incorrectly formatted, breaking
Linear's automatic tracking. Zero-input integration eliminates this failure mode and ensures
100% PR-task traceability.

### III. Bidirectional Sync Integrity

Changes in Linear (status updates, assignments, comments) MUST propagate to GitHub, and GitHub
events (PR merge, review comments, CI status) MUST update corresponding Linear issues. Sync
conflicts MUST be detected and reported but MUST NOT silently discard updates. The system MUST
maintain eventual consistency within 60 seconds under normal operation.

**Rationale**: Developers work across both platforms. Unidirectional sync creates stale data
and forces manual reconciliation. Bidirectional sync with conflict detection ensures both
systems reflect ground truth while preventing data loss.

## Integration Requirements

### Speckit Compatibility

- The automation MUST read tasks.md files generated by /speckit.tasks command
- Task format parsing MUST support parallel markers [P], user story tags [US#], and task IDs
- The system MUST respect task dependencies encoded in tasks.md structure
- Feature branch naming conventions from /speckit.specify MUST be preserved

### Linear API Contract

- All Linear issue creation MUST use officially supported Linear API endpoints
- Issue fields MUST map to Standard Linear schema (title, description, status, assignee, labels)
- The system MUST handle Linear API rate limits gracefully with exponential backoff
- Linear team and project associations MUST be configurable per repository

### GitHub Integration

- PR description formatting MUST follow Linear's automatic link detection patterns
- Branch protection rules MUST NOT be bypassed by automation
- The system MUST operate as a GitHub App or Action with least-privilege permissions
- Commit message parsing MUST support conventional commit formats

## Quality Standards

### Reliability

- Automation failures MUST NOT block PR creation or Linear issue updates
- Failed sync operations MUST retry with exponential backoff (max 3 attempts)
- All errors MUST be logged with sufficient context for manual recovery
- The system MUST provide health check endpoints for monitoring

### Observability

- Every task mapping, PR annotation, and sync operation MUST emit structured logs
- Sync latency metrics MUST be exposed for performance monitoring
- Failed operations MUST generate alerts with actionable error messages
- Audit trail MUST capture all automated changes for compliance review

### Security

- Linear API tokens MUST be stored in secure credential management systems
- GitHub App private keys MUST use repository secrets or equivalent secure storage
- The system MUST validate webhook signatures to prevent spoofing attacks
- No sensitive data (tokens, user emails) MUST appear in logs or error messages

## Governance

This constitution defines the non-negotiable requirements for the Linear-GitHub Automation
project. All feature additions, architectural decisions, and implementation changes MUST
comply with these principles.

### Amendment Process

1. Constitution amendments require documentation of rationale and impact analysis
2. Version bumps follow semantic versioning (MAJOR.MINOR.PATCH)
3. Breaking changes to integration contracts require MAJOR version increment
4. All amendments MUST update dependent templates within same commit

### Compliance Review

- Every PR MUST verify adherence to automation principles
- Code reviews MUST validate sync integrity and error handling requirements
- Integration tests MUST cover all three core principles before merge
- Complexity additions MUST be justified against stated principles

### Development Guidance

Runtime development guidance specific to this project SHALL be maintained in
`.specify/memory/development-guide.md` for implementation best practices, coding
standards, and tooling setup. The constitution defines WHAT we build; the development
guide defines HOW we build it.

**Version**: 1.0.0 | **Ratified**: 2025-10-21 | **Last Amended**: 2025-10-21
